# 空闲扫描

在渗透时，需要发送大量的包，如果引起目标服务器的警觉就有可能封掉IP的嗅探。

空闲扫描就是伪造 别人空闲的服务器 发包，这样就存在一个问题，由于IP地址是别人的。目标服务器返回的包也只会被发到 别人空闲的服务器 上，这样我们得不到返回的信息。所以能得到的信息就只有两点。

1. 我们伪造的这个服务器 IP 是空闲的，所以这段时间的只有我会影响到这个服务器的 ID 。
2. IP 包的 ID 是递增的，所以可以预测包的 ID。

所以这种嗅探利用 IP 包递增的原理来试探是否指定端口有响应，但却不能获取更多的信息。

## 步骤

向 空闲服务器发包 得到 ID 的值。
伪造 空闲服务器 向 目标服务器 发包。
向 空闲服务器发包 得到 改变的 ID 值。
通过 2 次获取的 ID 值递增情况，猜测 目标服务器 的端口是否开启。

## 命令

```bash
# -sI <idle_server_ip> 指定空闲主机
nmap -PN -sI <idle_server_ip> <target>
```
